<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ncst.hospitaloutpatient.mapper.organization.AdminMapper">

    <!-- 保留带 status 字段的 selectRegistrationLevels 映射，删除重复项 -->
    <select id="selectRegistrationLevels" resultType="com.ncst.hospitaloutpatient.model.dto.organization.RegistrationLevelResponse">
        SELECT number_type  AS code,
               display_name AS name,
               fee          AS price,
               status
        FROM number_type_config
        ORDER BY fee
    </select>

    <update id="updatePrice">
        UPDATE number_type_config
        SET fee = #{price}
        WHERE number_type = #{code}
    </update>


    <select id="checkCodeExists" resultType="int">
        SELECT COUNT(*) FROM number_type_config WHERE number_type = #{code}
    </select>

    <insert id="insertRegistrationLevel">
        INSERT INTO number_type_config (
        number_type,
        display_name,
        fee,
        status
        ) VALUES (
        #{code},
        #{name},
        #{price},
        1
        )
    </insert>

    <update id="updateLevelStatus">
        UPDATE number_type_config
        SET status = #{status}
        WHERE number_type = #{code}
    </update>

</mapper>